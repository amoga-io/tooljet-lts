<!DOCTYPE html>
<html lang="en">

<head>
  <% if (process.env.NODE_ENV === 'production' && process.env.SERVE_CLIENT !== 'false') { %>
  <base href="__REPLACE_SUB_PATH__" />
  <% } else { %>
  <base href="/" />
  <% } %>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ToolJet</title>

  <style>
    a {
      cursor: pointer;
    }

    body {
      margin: 0;
    }

    .load {
      display: none;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .load.dark-loader {
      display: flex;
      background-color: #1f2936;
      margin: 0;
    }

    .load div {
      width: 20px;
      height: 20px;
      background-color: #3E63DD;
      border-radius: 50%;
      margin: 0 5px;
      animation-name: up-and-down;
      animation-duration: 0.8s;
      animation-iteration-count: infinite;
      animation-direction: alternate;
    }

    .load .two {
      animation-delay: 0.3s;
    }

    .load .three {
      animation-delay: 0.6s;
    }

    @keyframes up-and-down {
      to {
        opacity: 0.2;
        transform: translateY(-20px);
      }
    }
  </style>

  <!-- Load Google Fonts with optimized display parameter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&family=Source+Code+Pro&display=swap" rel="stylesheet">

  <link rel="icon" href="assets/images/logo.svg" sizes="any" type="image/svg+xml" />
  <script src="assets/libs/pyodide-0.23.2/pyodide.js"></script>
</head>

<body>
  <div id="app">
    <div style="width: 100%">
      <div id="app-loader" class="load">
        <div class="one"></div>
        <div class="two"></div>
        <div class="three"></div>
      </div>
    </div>
  </div>
</body>
<script>
  if (typeof localStorage !== 'undefined') {
      const darkModeEnabled = localStorage.getItem('darkMode') === 'true';
      const loaderElement = document.getElementById('app-loader');
      if (darkModeEnabled) {
        loaderElement.classList.add('dark-loader');
      } else {
        loaderElement.style.display = 'flex';
      }
  }
</script>
</html>
